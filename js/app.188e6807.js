(function(e){function t(t){for(var r,c,i=t[0],u=t[1],s=t[2],d=0,l=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&l.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(l.length)l.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},c={app:0},a={app:0},o=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-0b1da307":"a0127f51","chunk-259868fb":"92742d6d","chunk-2d0d7691":"07893365","chunk-2d0e95df":"16f3c617","chunk-2d0f07a0":"d2f2756e","chunk-37076539":"6bf727e1","chunk-52a454f8":"e15fbd5d","chunk-18b41266":"f309f8e4","chunk-6b61e2c5":"859c5927","chunk-5a757037":"e2b2f4b9","chunk-6f31bc16":"3f443f33","chunk-8157fae6":"5c192d0d","chunk-df1e35b0":"6b55dac2"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-0b1da307":1,"chunk-259868fb":1,"chunk-37076539":1,"chunk-52a454f8":1,"chunk-18b41266":1,"chunk-6b61e2c5":1,"chunk-5a757037":1,"chunk-6f31bc16":1,"chunk-8157fae6":1,"chunk-df1e35b0":1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0b1da307":"6e23c474","chunk-259868fb":"0868923d","chunk-2d0d7691":"31d6cfe0","chunk-2d0e95df":"31d6cfe0","chunk-2d0f07a0":"31d6cfe0","chunk-37076539":"a033eb76","chunk-52a454f8":"ebd5a772","chunk-18b41266":"a48a27b5","chunk-6b61e2c5":"ae676cf8","chunk-5a757037":"b10d391e","chunk-6f31bc16":"953e6b0c","chunk-8157fae6":"26dc9e0e","chunk-df1e35b0":"2aab4d42"}[e]+".css",a=u.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var s=o[i],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===r||d===a))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){s=l[i],d=s.getAttribute("data-href");if(d===r||d===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete c[e],f.parentNode.removeChild(f),n(o)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){c[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=o);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=i(e);var l=new Error;s=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",l.name="ChunkLoadError",l.type=r,l.request=c,n[1](l)}a[e]=void 0}};var f=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/slatronica-mtg/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var f=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"08cc":function(e,t,n){},"20c4":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a481"),n("28a5"),n("6b54"),n("6762"),n("2fdb");var r=function(){return{sortBy:function(e,t,n){var r=function(t){return n?n(t[e]):t[e]};return function(e,n){var c=r(e),a=r(n);return(c<a?-1:c>a?1:0)*[-1,1][+!!t]}},pluck:function(e,t){return e.map((function(e){return e[t]}))},pluckDeep:function(e,t,n){return e.map((function(e){return e.hasOwnProperty(t)?e[t][n]:void 0}))},fastPush:function(e,t){return e[e.length]=t,e},intersection:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))},max:function(e){return e.reduce((function(e,t){return Math.max(e,t)}))},get:function(e,t){try{return e()}catch(n){return t}},debounce:function(e,t,n){var r;return function(){var c=this,a=arguments,o=function(){r=null,n||e.apply(c,a)},i=n&&!r;clearTimeout(r),r=setTimeout(o,t),i&&e.apply(c,a)}},formatCurrency:function(e){if(e){e=e.toString();var t=e.split(".")[0],n=e.split(".")[1];return t=(t+"").replace(/(\d)(?=(\d{3})+$)/g,"$1,"),e="$ "+t,n?(n=n.slice(0,2),n=1===n.length?n+0:n,e+="."+n):e+=".00",e}return""}}}},"2b29":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,viewBox:"0 0 20 20","aria-labelledby":e.iconName,role:"presentation"}},[n("title",{attrs:{id:e.iconName,lang:"en"}},[e._v(e._s(e.iconName))]),n("g",{attrs:{fill:e.iconColor}},[e._t("default")],2)])},c=[],a=(n("c5f6"),{name:"IconBase",props:{iconName:{type:String,default:""},width:{type:[Number,String],default:18},height:{type:[Number,String],default:18},iconColor:{type:String,default:"currentColor"}}}),o=a,i=n("2877"),u=Object(i["a"])(o,r,c,!1,null,null,null);t["a"]=u.exports},"4ec3":function(e,t,n){"use strict";var r=n("bc3a"),c=n.n(r),a="localhost:8080"===window.location.host?"/":"/slatronica-mtg/",o="localhost:8080"===window.location.host?"http://localhost:3000/":"https://icyzqzjclk.execute-api.us-east-1.amazonaws.com/dev/";c.a.interceptors.request.use((function(e){if(e.url.indexOf("api.scryfall.com")>-1)return e;var t=window.localStorage.getItem("token");return t&&"get"!==e.method&&(e.headers["x-access-token"]=t),e}),(function(e){return Promise.reject(e)})),t["a"]={login:function(e,t){return c.a.post("".concat(o,"authenticate"),{username:e,password:t})},verify:function(e){return c.a.post("".concat(o,"authenticate/verify"),{token:e})},post_gallery:function(e){return c.a.post("".concat(o,"gallery/"),e)},delete_alter:function(e){return c.a.delete("".concat(o,"gallery/").concat(e))},get_cards:function(){return c.a.get("".concat(o,"gallery/"))},update_gallery_card:function(e){return c.a.put("".concat(o,"gallery/"),e)},get_decks:function(){return c.a.get("".concat(o,"decks/"))},add_deck:function(e){return c.a.post("".concat(o,"decks/"),e)},add_deck_card:function(e,t){return c.a.put("".concat(o,"decks/").concat(t,"/addcard/"),e)},update_deck_card:function(e,t){return c.a.put("".concat(o,"decks/").concat(e,"/updateCard/"),t)},remove_deck_card:function(e,t){return c.a.delete("".concat(o,"decks/").concat(e,"/card/").concat(t.card_id),t)},update_deck:function(e,t){return c.a.put("".concat(o,"decks/").concat(e),t)},delete_deck:function(e){return c.a.delete("".concat(o,"decks/").concat(e))},get_scryfall_card:function(e){return c.a.get("https://api.scryfall.com/cards/".concat(e))},search_scryfall_names:function(e){var t="https://api.scryfall.com/cards/autocomplete";return c.a.get("".concat(t,"?q=").concat(e))},get_card_named:function(e){var t="https://api.scryfall.com/cards/named";return c.a.get("".concat(t,"?exact=").concat(e))},get_card_editions:function(e){return c.a.get(e).then((function(e){return e.data.data}))},get_settings:function(){return c.a.get("".concat(a,"data/settings.json"))},get_pages:function(){return c.a.get("".concat(a,"data/pages.json"))},get_posts:function(){return c.a.get("".concat(a,"data/posts.json"))}}},"56d7":function(e,t,n){"use strict";n.r(t);n("6b54"),n("28a5"),n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-blue-lt layout-wrap relative",class:{"drawer-open":e.drawer_open}},[n("nav",{staticClass:"z-50 bg-gray-200",attrs:{id:"drawer"}},[n("DrawerContents")],1),e.drawer_open?n("div",{staticClass:"window-shade z-40 md:hidden",on:{click:function(t){return e.toggleDrawer()}}}):e._e(),n("header",{staticClass:"bg-black fixed w-full top-0 z-50"},[n("router-view",{attrs:{name:"header"}})],1),n("main",{staticClass:"default-content z-0"},[n("router-view")],1),n("footer",{staticClass:"text-blue-dk text-xs md:text-sm bg-black fixed bottom-0 right-0 h-4 z-10"},[n("router-view",{attrs:{name:"footer"}})],1)])},a=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-blue-dk drawer-menu"},[n("ul",[n("li",{directives:[{name:"show",rawName:"v-show",value:!e.username,expression:"!username"}]},[n("router-link",{attrs:{to:"/login"}},[e._v("\n        Login\n      ")])],1),n("li",{directives:[{name:"show",rawName:"v-show",value:e.username,expression:"username"}]},[n("a",{on:{click:function(t){return e.logout()}}},[e._v("Welcome, "+e._s(e.username)+" | Logout")])]),n("li",[n("router-link",{attrs:{to:"/"}},[e._v("\n        Gallery\n      ")])],1),n("li",[n("router-link",{attrs:{to:"/decks"}},[e._v("\n        Decks\n      ")])],1),n("li",{class:{active:"pages"===e.active_nav}},[n("span",{on:{click:function(t){return e.toggle("pages")}}},[e._v("\n        Pages\n        "),n("icon-base",{directives:[{name:"show",rawName:"v-show",value:"pages"===e.active_nav,expression:"active_nav === 'pages'"}],attrs:{"icon-name":"minus-outline"}},[n("MinusOutline")],1),n("icon-base",{directives:[{name:"show",rawName:"v-show",value:"pages"!==e.active_nav,expression:"active_nav !== 'pages'"}],attrs:{"icon-name":"add-outline"}},[n("AddOutline")],1)],1),n("ul",[n("li",[n("router-link",{attrs:{to:"/about"}},[e._v("\n            About\n          ")])],1),n("li",[n("router-link",{attrs:{to:"/life-tracker"}},[e._v("\n            Life Tracker\n          ")])],1),n("li",[n("router-link",{attrs:{to:"/house-rules"}},[e._v("\n            EDH House Rules\n          ")])],1),n("li",[n("router-link",{attrs:{to:"/edh-mulligan"}},[e._v("\n            EDH House Mulligan\n          ")])],1),n("li",[n("router-link",{attrs:{to:"/blueprint-process"}},[e._v("\n            Blueprint Process\n          ")])],1)])])])])},i=[],u=(n("55dd"),n("4ec3")),s=n("20c4"),d=n("2b29"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M10 20a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm5-9v2H5V9h10z"}})])},f=[],p=n("2877"),h={},g=Object(p["a"])(h,l,f,!1,null,null,null),m=g.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M11 9h4v2h-4v4H9v-4H5V9h4V5h2v4zm-1 11a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16z"}})])},_=[],b={},y=Object(p["a"])(b,k,_,!1,null,null,null),v=y.exports,w={name:"DrawerContents",components:{IconBase:d["a"],MinusOutline:m,AddOutline:v},data:function(){return{reports:[],active_nav:""}},computed:{username:function(){return this.$store.state.auth.username}},created:function(){var e=this;u["a"].get_posts().then((function(t){e.reports=t.data.game_reports.sort(Object(s["a"])().sortBy("date",!1)),e.reports=e.reports.slice(0,5)})).catch((function(e){return console.log("Error in DrawerContents get posts: ".concat(e))}))},methods:{toggle:function(e){this.active_nav=e===this.active_nav?"":e},logout:function(){window.localStorage.removeItem("token"),this.$store.commit("setUsername",{username:""})},testPost:function(){u["a"].post_gallery().then((function(e){console.log("post response: ",e)})).catch((function(e){console.log("post response error: ",e)}))}}},O=w,D=(n("8b40"),Object(p["a"])(O,o,i,!1,null,"3ad27be2",null)),C=D.exports,j={name:"AppLayout",components:{DrawerContents:C},data:function(){return{white_bg:!1}},computed:{drawer_open:function(){return this.$store.state.layout.drawer_open}},watch:{$route:function(e,t){this.$store.commit("toggleDrawer",{force:!1})}},created:function(){var e=this,t=window.localStorage.getItem("token");t&&u["a"].verify(t).then((function(t){t.data.verification.username&&e.$store.commit("setUsername",{username:t.data.verification.username})})).catch((function(e){console.warn("Your session has expired. Please login again.",e),window.localStorage.removeItem("token")}))},methods:{toggleDrawer:function(){this.$store.commit("toggleDrawer")}}},P=j,x=(n("5c0b"),Object(p["a"])(P,c,a,!1,null,null,null)),S=x.exports,E=n("8c4f");r["a"].use(E["a"]);var A=new E["a"]({base:"/slatronica-mtg/",routes:[{path:"/",name:"GalleryPage",components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-5a757037").then(n.bind(null,"78a1"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/about",name:"AboutPage",props:{default:{pageKey:"about-page"}},components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-37076539").then(n.bind(null,"40d9"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/login",name:"LoginPage",props:{default:{pageKey:"login-page"}},components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-df1e35b0").then(n.bind(null,"48ca"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/edh-mulligan",name:"HouseMulligan",props:{default:{pageKey:"edh-house-mulligan"}},components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-37076539").then(n.bind(null,"40d9"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/blueprint-process",name:"BlueprintProcess",components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-259868fb").then(n.bind(null,"8788"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/house-rules",name:"HouseRules",props:{default:{pageKey:"edh-house-rules"}},components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-37076539").then(n.bind(null,"40d9"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/all-reports",name:"AllReports",components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-2d0d7691").then(n.bind(null,"7761"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/post/:id",name:"BlogPost",props:{default:!0},components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-0b1da307").then(n.bind(null,"afbc"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/decks",name:"DefaultDeckPage",components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return Promise.all([n.e("chunk-52a454f8"),n.e("chunk-18b41266")]).then(n.bind(null,"a60d"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/decks/:deckID",name:"DeckPage",components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return Promise.all([n.e("chunk-52a454f8"),n.e("chunk-18b41266")]).then(n.bind(null,"a60d"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"/life-tracker",name:"LifeTracker",components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-8157fae6").then(n.bind(null,"0f45"))}}},{path:"/card/gallery/:«cardID»",name:"SingleGalleryCard",components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return Promise.all([n.e("chunk-52a454f8"),n.e("chunk-6b61e2c5")]).then(n.bind(null,"39e9"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}},{path:"*",name:"Error404Page",components:{header:function(){return n.e("chunk-6f31bc16").then(n.bind(null,"e3fd"))},default:function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))},footer:function(){return n.e("chunk-2d0f07a0").then(n.bind(null,"9d10"))}}}]}),L=n("2f62"),B={state:{username:""},mutations:{setUsername:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.username=t.username}}},N=(n("20d6"),n("6762"),n("2fdb"),n("fb28")),M={state:{gallery_list:[]},mutations:{setGallery:function(e,t){e.gallery_list=t.alters.sort(Object(s["a"])().sortBy("date",!1)),e.gallery_list=e.gallery_list.map(Object(N["a"])().setAllCardsVisible),this.commit("pageLoading",{loading:!1})},addAlter:function(e,t){var n=t.alter;e.gallery_list.push(n),e.gallery_list.sort(Object(s["a"])().sortBy("date",!1))},sortGallery:function(e,t){e.gallery_list=e.gallery_list.sort(Object(s["a"])().sortBy(t.field,t.direction))},applyFilter:function(e,t){e.gallery_list="All"===t.filter?e.gallery_list.map(Object(N["a"])().setAllCardsVisible):e.gallery_list.map((function(e){return e.visible=e.tags.includes(t.filter),e})),e.gallery_list=e.gallery_list.sort(Object(s["a"])().sortBy(t.field,t.direction))},deleteAlter:function(e,t){var n=e.gallery_list.findIndex((function(e){return e._id===t.id}));e.gallery_list.splice(n,1)}},actions:{initGallery:function(e){var t=this;e.commit("pageLoading",{loading:!0}),u["a"].get_cards().then((function(e){t.dispatch("combineGalleryListWithScryfall",{alters:e.data})})).catch((function(t){console.warn("error getting altered card list: "),console.error(t),e.commit("pageLoading",{loading:!1})}))},combineGalleryListWithScryfall:function(e,t){Object(N["a"])().combineScryfallData(t.alters).then((function(t){e.commit("setGallery",{alters:t})}))},deleteAlter:function(e,t){u["a"].delete_alter(t.id).then((function(){e.commit("deleteAlter",t)})).catch((function(e){console.warn(" ** Err Deleting Alter"),console.error(e)}))},postAlter:function(e,t){u["a"].post_gallery(t.alter).then((function(n){n.data.errors?console.warn(" ** Error posting new alter",n.data.message):(e.commit("toggleForm"),e.commit("addAlter",{alter:t.alter}))})).catch((function(e){return console.warn(" ** error posting alter",e)}))},putAlter:function(e,t){u["a"].update_gallery_card(t.alter).then((function(e){e.data.errors&&console.warn(" ** Error updating alter",e.data.message)})).catch((function(e){return console.error(" ** error updating alter",e)}))}}},$={state:{drawer_open:!1,open_form:!1,form_tab:"card",page_loading:!1},mutations:{toggleDrawer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.drawer_open=t.hasOwnProperty("force")?t.force:!e.drawer_open},toggleForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.tab&&(e.form_tab=t.tab),e.open_form=!e.open_form},pageLoading:function(e,t){e.page_loading=t.loading}}},T=(n("8e6e"),n("7f7f"),n("7514"),n("bd86"));n("ac6a"),n("456d");function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(T["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H={state:{deck_lists:[],deck_current:{},deck_sorted:{},use_custom_categories:!0,deck_sort_by:"cmc",card_count:0,empty_cols:[],base_alter_list:[],deck_price:0},mutations:{setDecks:function(e,t){e.deck_lists=t.decks},selectDeck:function(e,t){e.deck_current=t.deck},setDeckSorted:function(e,t){e.deck_sorted=t.deck_list},setCardCount:function(e,t){e.card_count=t.count},filterDeckByColor:function(e,t){e.deck_sorted=Object(N["a"])().filterByColor({deck:e.deck_sorted,colors:Object(s["a"])().pluck(t.color_options,"short"),types:Object.keys(e.deck_sorted),includes:t.includes}),e.empty_cols=Object(N["a"])().getEmptyColumns(e.deck_sorted)},addDeckCard:function(e,t){var n=Object(N["a"])().getCardCategoryName(t.card,e.use_custom_categories);n in e.deck_sorted||(e.deck_sorted[n]=[]),t.card=Object(N["a"])().prepCardForDeckpageDisplay(t.card),t.card.category=n,Object(s["a"])().fastPush(e.deck_sorted[n],t.card),Object(s["a"])().fastPush(e.deck_current.cards,t.card),e.deck_sorted=I({},e.deck_sorted)},emptyCategoryCheck:function(e,t){0===e.deck_sorted[t.category].length&&delete e.deck_sorted[t.category]},moveCardCategory:function(e,t){var n=e.deck_sorted[t.category].splice(e.deck_sorted[t.category].findIndex((function(e){return e._id===t.card_id})),1)[0];n=Object.assign(n,t.update_data),"*** REMOVE ***"===t.update_data.custom_category&&delete n.custom_category,n.category=Object(N["a"])().getCardCategoryName(n,e.use_custom_categories),n.category in e.deck_sorted===!1&&(e.deck_sorted[n.category]=[]),Object(s["a"])().fastPush(e.deck_sorted[n.category],n),e.deck_sorted=I({},e.deck_sorted),this.commit("emptyCategoryCheck",t)},updateDeckCard:function(e,t){var n=e.deck_sorted[t.category].find((function(e){return e._id===t.card_id})),r=e.deck_current.cards.find((function(e){return e._id===t.card_id}));n=Object.assign(n,t.update_data),r=Object.assign(r,t.update_data)},removeDeckCard:function(e,t){var n=e.deck_sorted[t.category].find((function(e){return e._id===t.card_id})),r=e.deck_current.cards.find((function(e){return e._id===t.card_id}));e.deck_sorted[t.category].splice(e.deck_sorted[t.category].indexOf(n),1),e.deck_current.cards.splice(e.deck_current.cards.indexOf(r),1),this.commit("emptyCategoryCheck",t)},addNewDeck:function(e,t){Object(s["a"])().fastPush(e.deck_lists,t.new_deck),e.deck_lists=I({},e.deck_lists),this.dispatch("selectDeck",{deck:t.new_deck})},updateDeck:function(e,t){e.deck_current.name=t.name?t.name:e.deck_current.name,e.deck_current.format=t.format?t.format:e.deck_current.format},deleteDeck:function(e,t){e.deck_lists.splice(e.deck_lists.findIndex((function(e){return e._id===t})),1),this.commit("toggleForm")},setSortBy:function(e,t){e.deck_sort_by=t},setUseCustomCategories:function(e,t){e.use_custom_categories=t,this.commit("pageLoading",{loading:!0}),this.commit("setDeckSorted",{deck_list:{}});var n=Object(N["a"])().groupCards(e.deck_current.cards,e.deck_current.cards,e.use_custom_categories);this.commit("setDeckSorted",{deck_list:n}),this.commit("pageLoading",{loading:!1})},setBaseAlterList:function(e,t){e.base_alter_list=t},updateDeckPrice:function(e,t){switch(t.type){case"ADD":e.deck_price+=t.amt;break;case"SUBTRACT":e.deck_price-=t.amt;break;default:e.deck_price=t.amt}}},actions:{initDecks:function(e,t){var n=this;e.state.base_alter_list.length||u["a"].get_cards().then((function(t){e.commit("setBaseAlterList",t.data)})).catch((function(e){console.warn("error getting alters for base_alter_list: "),console.error(e)})),u["a"].get_decks().then((function(r){var c=r.data,a={decks:c},o=t&&c.find((function(e){return e._id===t}))||c[0];e.commit("setDecks",a),n.dispatch("selectDeck",{deck:o})})).catch((function(e){console.warn("error getting decks: "),console.error(e)}))},selectDeck:function(e,t){var n=function(n){var r=Object(N["a"])().groupCards(n,t.deck.cards,e.state.use_custom_categories);e.commit("setDeckSorted",{deck_list:r}),e.commit("selectDeck",{deck:t.deck});var c=Object(N["a"])().countCards(t.deck.cards);e.commit("setCardCount",{count:c});var a=Object(N["a"])().priceDeck(t.deck.cards);e.commit("updateDeckPrice",{amt:a}),e.commit("pageLoading",{loading:!1})};e.commit("pageLoading",{loading:!0}),e.commit("setDeckSorted",{deck_list:{}}),t.deck.cards.length&&t.deck.cards[0].object?n(t.deck.cards):Object(N["a"])().combineScryfallData(t.deck.cards).then((function(e){t.deck.cards=e,n(e)})).catch((function(t){console.error(" ** error selecting deck: ",t),e.commit("pageLoading",{loading:!1})}))},addNewDeck:function(e,t){var n={name:t.new_deck.name};u["a"].add_deck(n).then((function(t){e.commit("addNewDeck",{new_deck:t.data.deck})})).catch((function(e){return console.error(" ** error adding new deck: ",e)}))},addDeckCard:function(e,t){e.commit("pageLoading",{loading:!0}),u["a"].add_deck_card(t.card,e.state.deck_current._id).then((function(n){t.card._id=n.data.card_id,Object(N["a"])().combineCardWithScryfallData(t.card).then((function(t){e.commit("addDeckCard",{card:t}),e.commit("setCardCount",{count:e.state.card_count+1});var n=Object(N["a"])().priceDeck(e.state.deck_current.cards);e.commit("updateDeckPrice",{amt:n})})).catch((function(e){console.error(" ** error adding new card",e)})).finally((function(){e.commit("pageLoading",{loading:!1})}))})).catch((function(e){return console.error(" ** error adding new card",e)}))},updateDeckCard:function(e,t){if("update_data"in t===!1)return!1;u["a"].update_deck_card(e.state.deck_current._id,t).then((function(n){t.category_move&&(e.commit("moveCardCategory",t),t.category="*** REMOVE ***"===t.update_data.custom_category?Object(N["a"])().getCardCategoryName({type_line:t.type},e.state.use_custom_categories):t.update_data.custom_category),t.new_edition&&(t.update_data=Object.assign(t.update_data,t.new_edition)),e.commit("updateDeckCard",t),"count_change"in t&&e.commit("setCardCount",{count:e.state.card_count+t.count_change});var r=Object(N["a"])().priceDeck(e.state.deck_current.cards);e.commit("updateDeckPrice",{amt:r})})).catch((function(e){return console.error(e)}))},removeDeckCard:function(e,t){u["a"].remove_deck_card(e.state.deck_current._id,t).then((function(n){e.commit("removeDeckCard",t),e.commit("setCardCount",{count:e.state.card_count-1});var r=Object(N["a"])().priceDeck(e.state.deck_current.cards);e.commit("updateDeckPrice",{amt:r})})).catch((function(e){return console.error(e)}))},updateDeck:function(e,t){u["a"].update_deck(e.state.deck_current._id,t).then((function(n){n.data.errors&&console.warn(" ** Error updating deck",n.data.message),e.commit("updateDeck",t)})).catch((function(e){return console.error(" ** error updating deck",e)}))},deleteDeck:function(e){u["a"].delete_deck(e.state.deck_current._id).then((function(){e.commit("deleteDeck",e.state.deck_current._id),e.dispatch("selectDeck",{deck:e.state.deck_lists[0]})})).catch((function(e){console.warn(" ** Err Deleting deck"),console.error(e)}))}}},F={state:{player_count:2,starting_life:20,trigger_reset:!0,multiplayer_mode:!1,color_order:["aqua","pink","yellow","goldenrod","plum","thistle"]},mutations:{setPlayerCount:function(e,t){e.player_count=t.player_count},setStartingLife:function(e,t){e.starting_life=t.starting_life},setMultiplayerMode:function(e,t){e.multiplayer_mode=t.multiplayer_mode},triggerResetLife:function(e){e.trigger_reset=!e.trigger_reset},triggerAdd:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.add_click=!e.add_click}}};function G(e){return new L["a"].Store({modules:{auth:B,gallery:M,layout:$,deck:H,lifetracker:F},state:{app_settings:e}})}r["a"].use(L["a"]);var q=G;n("def6"),n("08cc");window.addEventListener("load",(function(){if("serviceWorker"in navigator){var e="localhost:8080"===window.location.host?"/":"/slatronica-mtg/";navigator.serviceWorker.register("".concat(e,"cache.js")).then((function(){return console.log("Successfully registered cache worker")}),(function(e){return console.warn("Service worker registration failed",e)}))}})),r["a"].config.productionTip=!1,r["a"].filter("format-datestring",(function(e){var t={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"};if(!e)return"";var n=e.toString().split("-");if(3!==n.length)return"";var r=t[n[1]],c=n[2];return c="0"===c[0]?c[1]:c,"".concat(r," ").concat(c,", ").concat(n[0])})),u["a"].get_settings().then((function(e){new r["a"]({router:A,store:q(e.data),render:function(e){return e(S)}}).$mount("#app")})).catch((function(e){console.warn("error getting app settings: "),console.error(e)}))},"5c0b":function(e,t,n){"use strict";var r=n("e332"),c=n.n(r);c.a},"8b40":function(e,t,n){"use strict";var r=n("9ea9"),c=n.n(r);c.a},"9ea9":function(e,t,n){},def6:function(e,t,n){},e332:function(e,t,n){},fb28:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("8e6e"),n("7f7f"),n("456d"),n("6762"),n("2fdb"),n("7514"),n("5df3");var r=n("bd86"),c=(n("ac6a"),n("20c4")),a=n("4ec3");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){return{getCardCategoryName:function(e,t){return"custom_category"in e===!0&&t?e.custom_category:e.type_line.indexOf("Planeswalker")>-1?"Planeswalker":e.type_line.indexOf("Creature")>-1?"Creature":e.type_line.indexOf("Artifact")>-1?"Artifact":e.type_line.indexOf("Enchantment")>-1?"Enchantment":e.type_line.indexOf("Land")>-1?"Land":e.type_line.indexOf("Instant")>-1?"Instant":e.type_line.indexOf("Sorcery")>-1?"Sorcery":e.type_line},countCards:function(e){var t=Object(c["a"])().pluck(e,"quantity"),n=function(e,t){return e+t};return 0===t.length?0:t.reduce(n)},priceDeck:function(e){var t=Object(c["a"])().pluck(e,"quantity"),n=Object(c["a"])().pluckDeep(e,"prices","usd"),r=[];t.forEach((function(e,t){r[t]=e*n[t]||0}));var a=function(e,t){return e+t};return 0===r.length?0:r.reduce(a)},prepCardForDeckpageDisplay:function(e){return"card_faces"in e&&(e=i({},e,{},e.card_faces[0])),0===e.colors.length&&(e.colors=["C"]),e.visible=!0,e},combineCardWithScryfallData:function(e){return a["a"].get_scryfall_card(e.scryfall_id).then((function(t){return Object.assign(t.data,e)}))},combineScryfallData:function(e){var t=Object(c["a"])().pluck(e,"scryfall_id"),n=t.map((function(e){return a["a"].get_scryfall_card(e)}));return Promise.all(n).then((function(t){var n=t.map((function(e){return e.data}));return n.length===e.length?n.map((function(t,n){return Object.assign(t,e[n])})):n}))},groupCards:function(e,t,n){var r=this,a={};return e.forEach((function(e){var o=r.getCardCategoryName(e,n);o in a||(a[o]=[]),e=r.prepCardForDeckpageDisplay(e),e.category=o;var i=t.find((function(t){return t.scryfall_id===e.scryfall_id}));i.category=o,Object(c["a"])().fastPush(a[o],e)})),a},filterByColor:function(e){var t={};return e.types.forEach((function(n){t[n]=e.deck[n].map((function(t){var n=Object(c["a"])().intersection(t.colors,e.colors);return t.visible="includes"===e.includes?n.length>0:0===n.length,t}))})),t},getEmptyColumns:function(e){var t=[];return Object.keys(e).forEach((function(n){var r=Object(c["a"])().pluck(e[n],"visible"),a=function(e,t){return e||t},o=0!==r.length&&r.reduce(a);o||t.push(n)})),t},setAllCardsVisible:function(e){return e.visible=!0,e},getDifference:function(e,t){var n=Object(c["a"])().pluck(t,"scryfall_id");return e.filter((function(e){return!n.includes(e.scryfall_id)}))},getTokens:function(e){var t=e.filter((function(e){return e.hasOwnProperty("all_parts")}));return t.map((function(e){var t=e.all_parts.find((function(e){return"token"===e.component}));return t?{original:e.name,token:t}:null})).filter((function(e){return e}))}}}}});
//# sourceMappingURL=app.188e6807.js.map